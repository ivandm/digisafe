{% extends "account/index_base.html" %}
{% load i18n static leaflet_tags %}

{% block content %}
<h1>
    Home page Personal Account
</h1>
<div class="row gap-1 g-0">

    {# Impegni in agenda #}
    <div class="col-5 alert-secondary border-bottom border-secondary rounded-top p-2 ">
        <a href="{% url 'account:calendar' %}" class="float-end btn btn-primary">...</a>
        <h2 class="border-bottom border-secondary d-inline-flex">Impegni in agenda futuri</h2>
        <div class="">
            {% for a in user.agenda_future %}
            <div class="text-truncate">
                <span class="badge bg-secondary col-3">{{a.date_start}}</span>
                <span class="">{{a.object}}</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="vr"></div>

    {# Elenco work session  #}
    <div class="col-5 alert-secondary border-bottom border-secondary rounded-top p-2">
        <a href="{% url 'account:worksessions' %}" class="float-end btn btn-primary">...</a>
        <h2 class="border-bottom border-secondary d-inline-flex">Elenco work session opzionate</h2>
        <div>
            {% for w in user.sessionbook_set.all %}
            <div class="row mb-1 mx-0 px-0">
                <span class="col-3 badge bg-secondary ">{{w.range_date}}</span>
                <span class="col text-truncate px-1">{{w.name}}</span>
                <span class="col-3 p-0 text-truncate float-end text-end border-start border-secondary ">{{w.company}}</span>
            </div>
            <div class="clearfix"></div>
            {% endfor %}
        </div>
    </div>

    {# Profili lavorativi  #}
    <div class="col-5 alert-secondary border-bottom border-secondary rounded-top p-2">
        <a style="display:none;" href="" class="float-end btn btn-primary">...</a>
        <h2 class="border-bottom border-secondary d-inline-flex">Profili lavorativi</h2>
        <div>
            {% for j in user.jobprofile.job.all %}
            <div><a href="{% url 'job:info' j.id %}">{{j.title}}</a></div>
            {% endfor %}
        </div>
    </div>

    <div class="vr"></div>

    {# Qualifiche  #}
    <div class="col-5 alert-secondary border-bottom border-secondary rounded-top p-2">
        <div>
            <a style="display:none;" href="" class="float-end btn btn-primary">...</a>
            <h2 class="border-bottom border-secondary d-inline-flex">Qualifiche valide</h2>
            <div>
                {% for s in user.qualifications_valid %}
                <div class="row mb-1">
                    <div class="col text-truncate ">{{s.course.feature.title}}</div>
                    <div class="float-end col-3 text-end border-start border-secondary">{{s.getExpiration}}</div>
                </div>
                {% endfor %}
            </div>
        </div>
        <div>
            <a style="display:none;" href="" class="float-end btn btn-primary">...</a>
            <h2 class="border-bottom border-secondary d-inline-flex">Qualifiche in scadenza</h2>
            <div>
                {% for p in user.qualification_exp_in_one_year %}
                <div class="row  mb-1">
                    <div class="col text-truncate ">{{p.course.feature.title}}</div>
                    <div class="float-end col-3 text-end border-start border-secondary">{{p.getExpiration}}</div>
                </div>
                {% endfor %}
            </div>
        </div>

    </div>


</div>

{% endblock %}